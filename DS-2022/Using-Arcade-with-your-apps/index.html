<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>Esri Dev Summit 2022</title>

    <link rel="stylesheet" href="../../reveal.js/dist/reset.css" />
    <link rel="stylesheet" href="../../reveal.js/dist/reveal.css" />
    <link
      rel="stylesheet"
      href="../../reveal.js/dist/theme/black.css"
    />

    <!-- Override the Reveal theme varables: -->
    <!-- https://github.com/hakimel/reveal.js/blob/master/css/theme/template/exposer.scss -->
    <style type="text/css">
      :root {
        /* Color from slides */
        --r-background-color: #01114f;

        /* Main text color */
        --r-main-color: #fff;

        /* Arial font is recommended */
        --r-heading-font: Avenir Next Condensed, Helvetica Neue, Helvetica, sans-serif;
        --r-main-font: Avenir Next, Helvetica Neue, Helvetica, sans-serif;

        /* For consistency with the template: */
        --r-heading-font-weight: normal;
        --r-heading-text-transform: none;
        --r-heading-text-shadow: none;

        /* Section subheader color per theme */
        --r-section-subhead-color: #00ec86;

        --iframe-scale: 0.7;
      }

      .reveal {
        font-family: var(--r-main-font);
        font-weight: light;
      }

      .reveal h1,
      .reveal h2,
      .reveal h3 {
        text-transform: none;
        font-family: var(--r-heading-font);
        font-weight: 900;
      }

      .reveal h2 {
        font-size: 50px;
      }

      .reveal pre {
        font-size: 0.25em;
      }

      .reveal .subtitle {
        font-size: 80%;
        margin-top: -30px;
      }

      .sink {
        border-radius: 10px;
        background: rgba(0, 0, 0, 0.5);
        padding: 20px;
        padding-bottom: 0;
        color: white;
      }

      .subhead {
        font-size: 24px;
        color: var(--r-section-subhead-color);
      }

      .align-left .subhead,
      .align-left h1,
      .align-left h2,
      .align-left h3 {
        text-align: left;
      }

      .align-right .subhead,
      .align-right h1,
      .align-right h2,
      .align-right h3 {
        text-align: right;
      }

      .two-columns {
        display: flex;
        flex-direction: row;
        gap: var(--r-block-margin);
      }

      .two-columns iframe {
        top: 0;
        left: 0;
        width: calc(100% / var(--iframe-scale));
        max-width: unset;
        max-height: unset;
        aspect-ratio: 4 / 3;
        transform: translate(-50%, -50%) scale(var(--iframe-scale)) translate(50%, 50%);
        background: #fff;
      }

      .two-columns .iframe-wrapper {
        overflow: hidden;
        width: 100%;
        aspect-ratio: 4 / 3;
      }

      .two-columns pre {
        margin: 0;
        width: 100%;
      }

      .two-columns .left-column {
        position: relative;
        width: 60%;
      }

      .two-columns .right-column {
        position: relative;
        flex-grow: 1;
        padding: 0;
      }

      .two-columns .code-snippet.fragment.visible {
        margin-top: var(--r-block-margin);
      }

      button.play {
        width: 32px;
        height: 32px;

        border: none;
        outline: none;
        position: absolute;
        margin-right: 10px;
        margin-top: -12px;
        right: 0;

        cursor: pointer;

        background-color: rgba(0, 0, 0, 0);
        background-image: url("./images/play_64_50.png");
        background-size: 32px;
        background-repeat: no-repeat;

        z-index: 10;
      }

      button.play:hover {
        background-image: url("./images/play_64.png");
      }
    </style>

    <!-- Theme used for syntax highlighted code -->
    <link
      rel="stylesheet"
      href="../../reveal.js/plugin/highlight/monokai.css"
    />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section
          data-background="../../reveal.js/img/2022/dev-summit/bg-1.png"
          data-background-size="cover"
        >
          <h1 style="text-align: left; font-size: 60px">
            ArcGIS API for JavaScript:<br />
            Using Arcade with your apps
          </h1>
          <p
            style="
              text-align: left;
              font-size: 30px;
              color: var(--r-section-subhead-color);
            "
          >
            Anne Fitz & Yannik Messerli
          </p>
          <p style="text-align: left; font-size: 30px">
            Slides:
            <a href="http://bit.ly/abc123"><code>http://bit.ly/abc123</code></a>
          </p>
        </section>

        <section
          data-markdown
          data-background="../../reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## Session Goals

						* Overview of Arcade
						* Using Arcade in the ArcGIS JS API
						* Generate Arcade expressions using JavaScript

					</textarea
          >
        </section>

				<section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## What is Arcade?

						* A __lightweight__ and __secure__ expression language
							<small>Equivalent to a spreadsheet cell calculation</small>
						* Portable accross the entire platform
							<small>ArcGIS Pro, ArcGIS JS API, ArcGIS Runtime, ...</small>

						<div class="sink" style="font-style: italic;">
							<small>It is NOT intended to be a full programming / scripting language</small>
						</div>

					</textarea
          >
        </section>

				<section
          data-markdown
          data-background="../../reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						* Portable <br>
						<small>Write an expression in Pro, have it run in a browser, or on a device</small>
						* Secure<br>
						<small>Ensure that expressions or scripting do not compromise security</small>
						* Lightweight<br>
						<small>Most requirements for scripts and expressions are lightweight. The language should be small, and fast</small>
						* Geospatial<br>
						<small>Scripts should treat geospatial as first class Members</small>
					</textarea
          >
        </section>

        <section
          data-auto-animate
          data-background="../../reveal.js/img/2022/dev-summit/bg-3.png"
        >
          <h2 data-id="code-title">First example</h2>
          <div class="subtitle">Formatting labels</div>
          <iframe src="./demos/example1.html" style="width: 100%; height: 500px; margin-top: 40px;"></iframe>
					</code></pre>
        </section>

        <section
          data-auto-animate
          data-background="../../reveal.js/img/2022/dev-summit/bg-3.png"
        >
          <h2 data-id="code-title">First example</h2>
          <div class="subtitle">Formatting labels</div>
          <div class="two-columns" style="margin-top: 40px;">
            <div class="left-column">
              <div data-fragment-id="add-widget" class="code-snippet">
                <pre
            data-id="code-animation"
          ><code class="hljs" data-trim data-line-numbers>
labelingInfo: [
  new LabelClass({
    ...
    labelExpressionInfo: { 
			expression: "$feature.name"
		},
    symbol: ...,
  })
]
					        </code>
                </pre>
              </div>

              <div data-fragment-id="category" class="code-snippet fragment" style="margin-top: 20px">
                <button class="play" id="example-1-1"></button>
                <pre
            data-id="code-animation"
          ><code class="hljs" data-trim data-line-numbers>
	  expression: "$feature.name + TextFormatting.NewLine + $feature.Category"
					        </code>
                </pre>
              </div>
              <div data-fragment-id="opening-hours" class="code-snippet fragment" style="margin-top: 20px">
                <button class="play" id="example-1-2"></button>
                <pre
            data-id="code-animation"
          ><code class="hljs" data-trim data-line-numbers>
var hourFrom = $feature.openhours_from;
var hourTo = $feature.openhours_to;

if (IsEmpty(hourFrom) || IsEmpty(hourTo)) {
  return $feature.name;
}

return $feature.name + TextFormatting.NewLine + hourFrom + " - " + hourTo;
					        </code>
                </pre>
              </div>
            </div>
            <div class="right-column">
              <div class="iframe-wrapper">
                <iframe data-src="./demos/example1.html"></iframe>
              </div>
            </div>
          </div>
          </section>

		<section
		data-background="../../reveal.js/img/2022/dev-summit/bg-4.png"
	  >
		<h1 style="text-align: left; font-size: 62px">Language overview</h1>
	  </section>

	  <section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## Simple expressions

						* Single line expressions - implicit returns
						* Case insensitive
						* Dictionary syntax for field access

						<pre
            data-id="code-animation"
          ><code class="hljs" data-trim>
				/* returns % of population that is unhoused */
				$feature.unhoused / $feature.total_population * 100 
					</code></pre>
					</textarea
          >
        </section>

		<section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## More complex scripts

						* Type system
						* Flow control statements: `if`, `for`
						* Variable declaration and assignments
						* User defined functions

						<div class="sink" style="font-style: italic;">
							<small>Arcade Scripts run and return a value. They are self contained and cannot alter their environment.
						</small>
						</div>

					</textarea
          >
        </section>

		<section
		data-background="../../reveal.js/img/2022/dev-summit/bg-4.png"
	  >
		<h1 style="text-align: center; font-size: 62px">Profiles</h1>
		<p
		  style="
			text-align: left;
			font-size: 10px;
			color: var(--r-section-subhead-color);
		  "
		>
    <div style=" background: rgba(0, 0, 0, 0.8); border-radius: 30px; padding: 50px; width: fit-content;">
		  <table style="font-size: 24px;">
        <thead>
          <tr>
            <th></th>
            <th>Visualization</th>
            <th>Popup</th>
            <th>Labeling</th>
            <th>Feature-Z</th>
            <th>Constraint</th>
            <th>Field Calculate</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="font-size: 17px;">Context</td>
            <td>Renderers<br/>Visual Variables</td>
            <td>Popup<br/> Template </td>
            <td>LabelClass</td>
            <td>ElevationInfo In 3D Scenes</td>
            <td>FeatureForm widget<br/>FieldConfig</td>
            <td>3.x only!</td>
          </tr>
          <tr>
            <td style="font-size: 17px;">Globals</td>
            <td>$feature<br/>
            $view.scale
            </td>
            <td>$feature<br/>
            $layer<br/>
            $map<br/>
            $datastore
            </td>
            <td>$feature
            </td>
            <td>$feature
            </td>
            <td>$feature
            </td>
            <td>$feature<br/>
            $datastore
            </td>
          </tr>
          <tr>
            <td style="font-size: 17px;">Return type</td>
            <td>Text<br/>
            Number
            </td>
            <td>Text<br/>
            Number
            </td>
            <td>Text</td>
            <td>Number</td>
            <td>Boolean</td>
            <td>Text<br/>
              Number<br/>
              Date
            </td>
          </tr>
          <tr>
          <td style="font-size: 17px;">Banned functions</td>
            <td>FeatureSet
            functions
            </td>
            <td>N/A</td>
            <td>FeatureSet
            functions
            </td>
            <td>FeatureSet
            functions
            </td>
            <td>FeatureSet
            functions
            </td>
            <td>N/A</td>
          </tr>
        </tbody>
      </table>
    </div>

		</p>
	  </section>

	  <section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## Visualization
            - Yannik for the UniqueValueRenderer / ClassBreak 
            - Anne for the $view.scale
					</textarea
          >
        </section>

		<section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## Popups
						<iframe src="https://next.sites.afd.arcgis.com/javascript/latest/sample-code/popuptemplate-arcade-groupby/live/" style="width: 100%; height: 500px"></iframe>
					</textarea
          >
        </section>

		<section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## Cluster Popups
						<iframe src="https://next.sites.afd.arcgis.com/javascript/latest/sample-code/featurereduction-cluster-popup-filter/live/" style="width: 100%; height: 500px"></iframe>
					</textarea
          >
        </section>

		<section
          data-auto-animate
          data-background="../../reveal.js/img/2022/dev-summit/bg-3.png"
        >
          <h2 data-id="code-title">Cluster Popups</h2>
          <div class="subtitle">Using $aggregatedFeatures</div>
          <pre
            data-id="code-animation"
          ><code class="hljs" data-trim data-line-numbers>
			Expects($aggregatedFeatures, "capacity_mw")
			var mWtotal = Sum($aggregatedFeatures, "capacity_mw");
			var mWCoal = Sum(Filter($aggregatedFeatures, "fuel1 = 'Coal'"), "capacity_mw");
			if(mWCoal < 1){
			  return "none";
			}
			var mWratio = Round(mWCoal / mWtotal, 4);
			return `${Text(mWratio, "#.#%")} (${Text(mWCoal, "#,### mW")})`
					</code></pre>
        </section>

		<section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## Labeling
            Anne
					</textarea
          >
        </section>

		<section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## Forms
            Anne
					</textarea
          >
        </section>

		<section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## Feature sorting
            Anne
					</textarea
          >
        </section>

		<section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## Z values
            Yannik - elevation info for the HB's floor 
					</textarea
          >
        </section>

        		<section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## Generate Arcade Expression from user's input
            Yannik - display one floor
					</textarea
          >
        </section>

        <section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
						## A glimpse in the future...
            Anne
					</textarea
          >
        </section>


        <section
          data-markdown
          data-background="../..//reveal.js/img/2022/dev-summit/bg-2.png"
        >
          <textarea data-template>
				  ## Resources
          - For Arcade Documentation 
            https://developers.arcgis.com/arcade
          - Playground
            https://developers.arcgis.com/arcade/playground/
          - Using Arcade with JS API
            https://developers.arcgis.com/javascript/latest/guide/arcade/index.html
          - Blogs
            https://www.esri.com/arcgis-blog/?s=#&tag=arcade-expressions
          - Arcade Expression sharing repo
            https://github.com/Esri/arcade-expressions/
					</textarea
          >
        </section>


        <section
          data-background="../../reveal.js/img/2022/dev-summit/bg-4.png"
        >
          <h1 style="text-align: left; font-size: 48px">Section Header</h1>
          <p
            style="
              text-align: left;
              font-size: 24px;
              color: var(--r-section-subhead-color);
            "
          >
            Section Subhead
          </p>
        </section>

        <section
          data-background="../../reveal.js/img/2022/dev-summit/bg-5.png"
        >
          <h1 style="text-align: left; font-size: 48px">Section Header</h1>
          <p
            style="
              text-align: left;
              font-size: 24px;
              color: var(--r-section-subhead-color);
            "
          >
            Section Subhead
          </p>
        </section>

        <section
          data-background="../../reveal.js/img/2022/dev-summit/bg-6.png"
        >
          <h1 style="text-align: right; font-size: 48px">Section Header</h1>
          <p
            style="
              text-align: right;
              font-size: 24px;
              color: var(--r-section-subhead-color);
            "
          >
            Section Subhead
          </p>
        </section>

        <!-- FEEDBACK SLIDE: -->
        <section
          data-markdown
          data-background="../../reveal.js/img/2022/dev-summit/bg-7.png"
        >
          <textarea data-template>
            Please provide your feedback for this session by clicking on the session survey link directly below the video.
          </textarea>
        </section>

        <!-- ESRI LOGO SLIDE: -->
        <section
          data-background="../../reveal.js/img/2022/dev-summit/bg-8.png"
        >
          <!-- <img src="img/esri-science-logo-white.png" /> -->
        </section>
      </div>
    </div>

    <script src="../../reveal.js/dist/reveal.js"></script>
    <script src="../../reveal.js/plugin/notes/notes.js"></script>
    <script src="../../reveal.js/plugin/markdown/markdown.js"></script>
    <script src="../../reveal.js/plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>
  </body>
</html>
